# 外部定时服务设置指南

## 🎯 目标
设置免费的外部定时服务，每天UTC 01:00自动调用我们的scheduled端点

## 📋 详细步骤

### 步骤1：访问cron-job.org
1. 打开浏览器
2. 访问：https://cron-job.org
3. 你会看到一个简洁的首页

### 步骤2：注册账户
1. 点击右上角的 **"Sign up"** 按钮
2. 填写注册信息：
   - **Email**: 输入你的邮箱
   - **Password**: 设置密码
   - **Confirm Password**: 确认密码
3. 点击 **"Create Account"**
4. 检查邮箱，点击验证链接激活账户

### 步骤3：登录账户
1. 返回 https://cron-job.org
2. 点击 **"Sign in"**
3. 输入邮箱和密码登录

### 步骤4：创建新的Cron Job
1. 登录后，点击 **"Create cronjob"** 按钮
2. 你会看到创建表单

### 步骤5：填写Cron Job配置

#### 基本信息
- **Title**: `NYT Connections Daily Update`
- **URL**: `https://nyt-connections-helper.pages.dev/scheduled`

#### HTTP设置
- **Request method**: 选择 `POST`
- **Request body**: 点击展开，然后输入：
```json
{
  "action": "daily-update",
  "secret": "your-secret-key-here"
}
```

#### Headers设置
- 点击 **"Add header"**
- **Header name**: `Content-Type`
- **Header value**: `application/json`

#### 时间设置
- **Schedule**: 选择 `Advanced`
- **Cron expression**: 输入 `0 1 * * *`
- 这表示每天UTC时间01:00执行

#### 其他设置
- **Timezone**: 选择 `UTC`
- **Enabled**: 确保勾选

### 步骤6：保存并启用
1. 检查所有设置是否正确
2. 点击 **"Create cronjob"** 保存
3. 确认Cron Job状态为 **"Enabled"**

### 步骤7：测试执行
1. 在Cron Job列表中找到刚创建的任务
2. 点击 **"Execute now"** 按钮进行测试
3. 查看执行结果

## 🔍 验证设置

### 方法1：查看执行日志
1. 在cron-job.org的控制面板中
2. 点击你的Cron Job
3. 查看 **"Execution history"**
4. 确认状态为成功（绿色）

### 方法2：检查网站数据
1. 访问：https://nyt-connections-helper.pages.dev/api/today
2. 查看 `source` 字段
3. 如果显示包含时间戳的新数据源，说明执行成功

### 方法3：检查网站首页
1. 访问：https://nyt-connections-helper.pages.dev/
2. 查看谜题数据是否更新
3. 查看浏览器控制台的日志

## ⏰ 时间安排

### 执行时间
- **UTC时间**: 每天 01:00
- **北京时间**: 每天 09:00
- **美国东部时间**: 每天 21:00（前一天）

### 预期结果
- 明天（9月13日）北京时间09:00后
- 网站应该显示9月13日的最新谜题
- 数据源应该不再是"Backup"

## 🚨 故障排除

### 如果执行失败
1. 检查URL是否正确
2. 检查JSON格式是否正确
3. 检查Content-Type header
4. 查看cron-job.org的错误日志

### 如果数据没更新
1. 可能Mashable解析失败
2. 检查scheduled端点的响应
3. 手动调用refresh API测试

## 📞 需要帮助？
如果在任何步骤遇到问题，告诉我：
1. 你在哪一步遇到问题
2. 看到了什么错误信息
3. 截图（如果有的话）

我会帮你解决！